## 数据提取练习

#### 1_1. tr命令对文件重命名，内容的替换操作

* 解答步骤

  >先把字符串保存到一个变量num中： num = '1 2 3 4 5 6 7 9 a v 你好 . /8 ' ；
  >
  >用tr命令替换， tr-c替换所有不属于第一个字符集的内容， 只留下数字 “[:digit:]”, 除了数字以外的内容都先替换成‘+’

  `echo ${num} | tr -c "[:digit:]" + `

  >tr -s  +    压缩+

  `echo ${num} | tr -c "[:digit:]" + | tr -s "+" `

  >用字符串拼接解决最后一个+问题

```shell
echo `echo ${num} | tr -c "[:digit:]" + | tr -s "+"`0 | ab
```

​	使用管道符号 得出结果

![](C:\Users\yalnie\Desktop\Linux课程\a_1.png)

！！！中间echo转化时，注意一下是反单引号

###另解：

> echo -n 表示没有换行符号（echo打印的时候自动加了换行符号，printf没有， 二则的区别）

` echo -n ${num} | tr -c "[:digit:]" + `

bc 处理计算时要以换行符号结束，所以再用一次echo

```shell
echo `echo -n ${num} | tr -c "[:digit:]" + | tr -s "+"` | bc
```

![](C:\Users\yalnie\Desktop\Linux课程\a_2.png)

#### 1_2. 请将该⽂件中所有⼤写字母转换为⼩写

![](C:\Users\yalnie\Desktop\Linux课程\a_3.png)

用tr替换， 2种方法

#### 2 找到PATH 变量中的最后⼀个路径 

a: 一般方法； b: 利用转义符\n； c：应用反转

![](C:\Users\yalnie\Desktop\Linux课程\a_4.png)

#### 3. 使⽤last 命令,输出所有的登录⽤户名及登录次数，按登录次数由多及少排序

>last | cut -d " " -f1  (所有的登录用户)

![](C:\Users\yalnie\Desktop\Linux课程\a_5.png)

> last | cut -d " " -f1 | grep -v "^$" | grep -v wtmp  去除无效的列

![](C:\Users\yalnie\Desktop\Linux课程\a_6.png)

> 统计登录次数先排序last | cut -d " " -f1 | grep -v "^$" | grep -v wtmp | sort 
>
> （先不用uniq去重的机制：找上下临近的值，临近值重复才可以实现去重）

![](C:\Users\yalnie\Desktop\Linux课程\a_7.png)

>last | cut -d " " -f1 | grep -v "^$" | grep -v wtmp | sort | uniq -c 去重并统计次数

![](C:\Users\yalnie\Desktop\Linux课程\a_8.png)

>sort 按字母排序， sort -n 按数字从小到大排序，sort -nr 反向排序

![](C:\Users\yalnie\Desktop\Linux课程\a_9.png)

#### 4. 在云主机上查找系统登录⽤户的总⼈次

>先剔除无效的行，再统计 last | grep -v "^$" | grep -v wtmp | wc -l 

![](C:\Users\yalnie\Desktop\Linux课程\a_10.png)

#### 5. 将/etc/passwd 中的内容按照⽤户名排

cat /etc/passwd | sort -t : -k 1 (拿出用户名， 以：作为分隔符， 按第一列排序)

![](C:\Users\yalnie\Desktop\Linux课程\a_11.png)

#### 6. 将/etc/passwd 中的内容按uid 排序

> cat /etc/passwd | sort -t : -k 3 -n(uid在第三列， -n按数字排列 )

![](C:\Users\yalnie\Desktop\Linux课程\a_12.png)

#### 7. 将本地的/etc ⽬录下的⽂件及⽬录，每⼗条保存到⼀个⽂件中

> 把内容先存放在 ls_etc.txt 文件中放在home路径下ls > ~/ls_etc.txt 
>
> 每10条切割一下，放在practice文件夹下split -l 10 ls_etc.txt practice/ls_etc_  

![](C:\Users\yalnie\Desktop\Linux课程\a_13.png)

#### 8. 将/etc/passwd 中存放的第10到20个⽤户，输出uid ， gid 和groups

> 取出10-20个用户cat /etc/passwd | head -20 | tail -10
>
> 用户名分割取第一列 cut -d: -f1 
>
> 参数代换xargs -n 1 id ；每次读一个参数给id

![](C:\Users\yalnie\Desktop\Linux课程\a_14.png)

####9.将按照⽤户名查看/etc/passwd 中的⽤户，读到'sync’ ⽤户时结束 

> cat /etc/passwd | sort -t : -k 1 <<sync(错误)
>
> << 是在前面命令从标准输入读入时作为结束字符的，但是前面命令只有标准输出完全没有从标准输入读入数据。要用xargs参数代换-esync

![](C:\Users\yalnie\Desktop\Linux课程\a_17.png)

> cat /etc/passwd | cut -d : -f 1 | xargs  -n 1 -esync id 
>
> cat /etc/passwd | cut -d : -f 1 | xargs  -p -n 1 -esync id 
>
> 图例中展示的是到games

#### 10. 词频统计（cat 重定向到a.txt 一直到xxx结束）

cat >> a.txt << xxx
nihao hello hello 你好
nihao
hello
ls
cd
world
pwd
xxx

>tr " " "\n" 把空格替换成换行

![](C:\Users\yalnie\Desktop\Linux课程\a_15.png)

>grep -v "^$" 去除空行
>
> sort | uniq -c 先排序再去重统计
>
>sort -n 从小到大排序
>
>sort -nr 逆向排序



![](C:\Users\yalnie\Desktop\Linux课程\a_16.png)